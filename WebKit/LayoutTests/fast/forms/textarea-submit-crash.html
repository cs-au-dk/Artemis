<p>This tests that a display:none textarea doesn't crash when submitted in a form.</p>
<form action="?" id="form">
    <textarea id="textarea" name=value style="-webkit-appearance:textarea" wrap=hard>123456789</textarea>
</form>

<pre id="console"></pre>

<script>
function log(s) {
    document.getElementById('console').appendChild(document.createTextNode(s + "\n"));
}

(function () {    
    if (document.URL.indexOf('?') == -1) {
        if (window.layoutTestController) {
            layoutTestController.dumpAsText();
            layoutTestController.waitUntilDone();
        }

        document.getElementById("textarea").style.display = "none";
        document.getElementById("form").submit();
        return;
    }

    log("PASS: You didn't crash.");
    log("Submitted form value: " + location.search);

    if (window.layoutTestController)
        layoutTestController.notifyDone();
})();
</script>
