<html>
<script>
if (!window.layoutTestController) {
    alert('this test can only be run by DumpRenderTree')
} else {
    layoutTestController.dumpAsText();
    layoutTestController.waitUntilDone();
    layoutTestController.setCallCloseOnWebViews(false);
    layoutTestController.setCanOpenWindows();
    layoutTestController.setCloseRemainingWindowsWhenComplete(false);
    window.open('resources/open-and-close-window-with-plugin.html');
}

</script>
This tests that opening a window with a WebView that contains a plugin, and then closing the window without calling -[WebView close] does not leak the window or the web view.
</html>
